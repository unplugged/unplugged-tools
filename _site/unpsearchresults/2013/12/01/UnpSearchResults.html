<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>UnpSearchResults</title>
    <meta name="charset" content="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="http://codeorigin.jquery.com/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/custom.css">
    <link rel="stylesheet" type="text/css" href="css/glyphicons.css">
  </head>
  <body class="homepage">
    <div class="row header">
      <div class="container">
        <h1><a id="view:_id2:homelink" href="/index.html" title="Unplugged Controls">Unplugged Controls</a></h1>
        <ul class="buttons">
          <li><a href="index.html">Home</a></li>
          <li><a href="documentation.html">Documentation</a></li>
        </ul>
      </div>
    </div>
    <div class="row footer">
    <div class="container">
		<h2>UnpSearchResults</h2>

		<div class="post">
			<h1 id='function'>Function</h1>

<p>This control displays search results by looking up key values from a view. The results are displayed in a similar way to the <span><span>unpFlatView</span></span> control. The XPage UnpFlatViewList.xsp must be copied from the Controls pack into your application (no editing of this XPage is required)</p>

<p><img alt='Search results' src='http://teamstudio.s3.amazonaws.com/Searchresults.png' /></p>

<p>The control will work when integrated with <span><span>unpScrollableArea</span></span></p>

<h1 id='usage'>Usage</h1>

<p>The view which is being searched should have it&#8217;s first column sorted, lowercase-d and the contents exploded to include as many words as you want to search on. The search facility is not full text but rather it is similar to the &#8220;Find&#8221; facility in a Notes view.</p>

<p>If the control is used with the <span><span>unpHeader</span></span> control, the control assumes that it is called with a URL Paramter of &#8220;query&#8221; which is the search term being used. The UnpHeader control must also have the search property set to &#8216;database&#8217; and the serachPage property set to the xpage this control is used in</p>

<p>Drag the control onto your XPage and complete the following Custom Properties:</p>

<ul>
<li>detailColumn: the secondary column of data to display (this is the column title)</li>

<li>insetData: whether the view should be indented with rounded corners or flush to the &#8220;edge&#8221; of it&#8217;s container</li>

<li>summaryColumn: the main column of data to display (this is the column title)</li>

<li>title: the title to display above the view data</li>

<li>viewName: the name of the view to search</li>

<li>viewsearch: the query which will be passed to the view to search with</li>

<li>xpageDoc: the name of the XPage to open documents in the view with</li>
</ul>
<pre class='CICodeFormatter'><code class='CICodeFormatter'> &lt;xc:unpSearchResults insetData="true"  
      detailColumn="DOB" summaryColumn="Name" viewName="Search" xpageDoc="Employee.xsp"&gt;  
      &lt;xc:this.viewsearch&gt;&lt;![CDATA[#{javascript:param.get("query")}]]&gt;&lt;/xc:this.viewsearch&gt;  
      &lt;xc:this.title&gt;&lt;![CDATA[#{javascript:"Search results for \"" + param.get("query") + "\""}]]&gt;&lt;/xc:this.title&gt;  
 &lt;/xc:unpSearchResults&gt;  
</code></pre>
<h1 id='troubleshooting'>Troubleshooting</h1>

<p>If you use this control and enter text into the search input field and either; the screen flashes and all data is returned, or; the results page contains no entries when it should check the following:</p>

<ol>
<li>That the view used has the first column sorted and is not categorized</li>

<li>That the &#8216;show multiple values as separate entries&#8217; box is checked</li>

<li>That the contents of the first column are contained in a @LowerCase( &#8230; ) function</li>

<li>There are no hidden columns in the view</li>

<li>Ensure UnpFlatView.xsp is copied from the Controls pack into your application</li>
</ol>

<p>The recommended view structure to create a new view with 3 columns; first being the key to search on, second being the data for the &#8216;summaryColumn&#8217; property and the third (if necessary) being the data for the property &#8216;detailsColumn&#8217;</p>

<h1 id='required_resources'>Required Resources</h1>

<p>When you use the custom control make sure that you have the following resources in your application:</p>

<ul>
<li>unp/jquery-1.7.2.min.js</li>

<li>unp/jquery.blockUI.min.js</li>

<li>unp/iScroll.min.js</li>

<li>unplugged.js</li>

<li>unpCommon.jss</li>

<li>unplugged.css</li>

<li>unp/right-arrow-circle.png</li>

<li>UnpFlatViewControl.xsp</li>
</ul>
	  	</div>
	</div>
</div>

  </body>
</html>